<!doctype html>
<html>
<head>
	<title>Smoking in pregnancy</title>
	<script src="Three.js"></script>
	<script src="OrbitControls.js"></script>
	<script src="STLLoader.js"></script>
	<script src="jquery-3.2.0.min.js"></script>
	<script type="text/javascript">
		var jloader = new THREE.JSONLoader();
		var controls;
		var pos = {};
		var surface_mesh;
		var camera;
		var renderer;
		var items_opacity = 0.4;
		var items_transparent = true;
		var unselected_airways = new THREE.MeshPhongMaterial({color: 0xEFD5DC, opacity: items_opacity, transparent: items_transparent, side: THREE.DoubleSide});
		var width = window.innerWidth - 316;
		var height = window.innerHeight - 76;
		
		function draw3D() {
			function setup() {			
				//try torso
				jloader.load('./models/torso.json', function (geometry) {
					var mesh = new THREE.Mesh(geometry, unselected_airways);
					mesh.name = "airways";
					pos["airways"] = mesh;
					scene.add(mesh);

					surface_mesh = mesh;
					var box = new THREE.Box3().setFromObject(surface_mesh);
					var center = new THREE.Vector3(box.min.x + ((box.max.x - box.min.x) / 2), box.min.y + ((box.max.y - box.min.y) / 2), box.min.z + ((box.max.z - box.min.z) / 2));
					
					controls.target.set(center.x, center.y, center.z);
					controls.update();

					$('#items-list').append('<input type="checkbox" class="item" value="airways" />airways<br/>');
				});
			}
			
			function animate() {
				requestAnimationFrame(animate);
				controls.update();
				renderer.render(scene, camera);
			}
			
			var scene = new THREE.Scene();
			
			camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 10000);
			
			var ambientLight = new THREE.AmbientLight(0x555555);
			scene.add(ambientLight);
			
			var directionalLight = new THREE.DirectionalLight(0xe0e0e0);
			directionalLight.position.set(5, 2, 5).normalize();
			scene.add(directionalLight);
			
			var directionalLight2 = new THREE.DirectionalLight(0xe0e0e0);
			directionalLight2.position.set(-5, -2, -5).normalize();
			scene.add(directionalLight2);
			
			renderer = new THREE.WebGLRenderer();
			renderer.setSize(width, height);
			renderer.setClearColor(0x000000, 1);
			
			var span = document.getElementById("shapecanvas");
			span.appendChild(renderer.domElement);
			controls = new THREE.OrbitControls(camera, renderer.domElement);
			
			setup();
			animate();
		}
	</script>
	
	</head>
	<body onload="draw3D();">
		<div id="content">
			<div id="viewer">
				<span id="shapecanvas"></span>
			</div>
		</div>
	</body>
</html>