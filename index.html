<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Page Title</title>
    <script src="Three.js"></script>
    <script src="OrbitControls.js"></script>
    <script src="STLLoader.js"></script>
    <script src="JSONLoader.js"></script>
    <script src="jquery-3.3.1.min.js"></script>
    <script type = "text/javascript">
            var jloader = new THREE.JSONLoader();
            var sloader = new THREE.STLLoader();
            var controls;

            var hue_limit = 2/3;
		    var max_hbco = 7.7;
		    var color_factor = hue_limit / max_hbco;
		    var hbco = [0.0, 1.0, 1.5, 2.0, 2.6, 3.2, 3.8, 4.4, 4.9, 5.4, 5.8, 6.2, 6.6, 6.9, 7.2, 7.5, 7.7, 7.7, 7.4, 7.0, 6.4, 5.9, 5.2, 4.6, 4.1];
        
            console.log("1");
            function draw3D() {
                function setup() {
                    jloader.load('torso.json', function (geometry) {
                        var material = new THREE.MeshPhongMaterial( {
                            color: new THREE.Color("hsl(" + ((max_hbco - hbco[0]) * color_factor * 360) + ", 100%, 50%)"),
                        });
                        
                        var mesh = new THREE.Mesh(geometry, material);
                        mesh.name = "fetus";
                        pos["fetus"] = mesh;
                        scene.add(mesh);
                        $('#items-list').append('<input type="checkbox" class="item" value="fetus" />fetus<br/>');
                    });
                }
                
                function animate() {
                    requestAnimationFrame(animate);
                    controls.update();
                    renderer.render(scene, camera);
                }
                var scene = new THREE.Scene();
                var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
                var renderer = new THREE.WebGLRenderer();
                renderer.setSize(window.innerWidth, window.innerHeight);
                renderer.setClearColor(0x000000, 1);
                document.body.appendChild(renderer.domElement);
                
                controls = new THREE.OrbitControls(camera, renderer.domElement);
                
                setup();
                animate();
            /*
            var loader = new THREE.ObjectLoader();
            console.log("2");
            loader.load(
                'torso.json',
                function(geometry, materials) {
                    var material = materials[0];
                    var object = new THREE.Mesh(geometry, material);
                    scene.add(object);
                }
            );
            */
            }
    </script>
</head>

<body onload="draw3D()">
</body>

</html>